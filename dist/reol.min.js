(function(t,n){"undefined"!=typeof module?module.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()})("Reol",function(){"use strict";function t(t){var n;this.index={},this.indexes={};for(n in t)this.index[n]={},this.indexes[n]=t[n];return this}function n(n,i){var e="";return i[n]?e=i[n]:n.indexOf(".")&&(e=t.findByPath(i,n)),"object"!=typeof this.index[n][e]?(this.index[n][e]=i,!0):!1}return t.prototype=[],t.findByPath=function(t,n){var i,e;for(n=n.split("."),e=t;n.length&&e;)i=n.shift(),e=e[i];return e},t.prototype.add=function(t,i){var e,r;if("object"!=typeof t){if(e=Error("Sorry, this class only works with objects."),!i)throw e;i(e)}this.push(t);for(r in this.indexes)n.call(this,r,t);return i&&i(),this},t.prototype.merge=function(t,n){var i,e;for(i=0,e=t.length;e>i;i++)this.add(t[i]);return n&&n(),this},t.prototype.find=function(t,n,i){var e,r,o;n=n||function(){};for(r in t)if(t[r]){e=r;break}return e?(o=this.index[e]?this.findInIndex(e,t[e]):this.findInList(e,t[e],i),o=!o&&[]||void 0!==o.length&&o||[o],n(null,o),o):(n(this.toArray()),this.toArray())},t.prototype.findOne=function(t,n){return this.find(t,function(t,i){n&&n(t,i[0])},!0)[0]},t.prototype.findInIndex=function(t,n){return this.index[t][n]},t.prototype.findInList=function(t,n,i){var e,r,o=[],f=this;for(e=0,r=f.length;r>e;e++)if(f[e][t]===n){if(i)return f[e];o.push(f[e])}return o},t.prototype.toArray=function(){return this},t});